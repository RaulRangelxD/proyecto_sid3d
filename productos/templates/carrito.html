<!-- carrito.html -->
{% extends "base2.html" %} {% block title %}
<title>Carrito</title>
{% endblock %} {% block content %} {% if venta_actual is not None %}
<table class="table-auto w-full">
  <thead class="table-header-group">
    <tr class="table-row bg-gray-100 hover:bg-gray-200">
      <th class="table-cell text-sm font-medium text-gray-900 px-6 py-4 text-center rounded-tl-lg">Imagen</th>
      <th class="table-cell text-sm font-medium text-gray-900 px-6 py-4 text-center">Nombre</th>
      <th class="table-cell text-sm font-medium text-gray-900 px-6 py-4 text-center">Precio</th>
      <th class="table-cell text-sm font-medium text-gray-900 px-6 py-4 text-center">Disponible</th>
      <th class="table-cell text-sm font-medium text-gray-900 px-6 py-4 text-center rounded-tr-lg">Opciones</th>
    </tr>
  </thead>
  <tbody class="table-row-group">
    {% for producto in articulos_carrito %}
    <tr class="table-row bg-white hover:bg-gray-200 rounded-lg">
      <th class="table-cell text-sm font-medium text-gray-900 px-6 py-4 m-auto rounded-l-lg">
        <div class="flex justify-center">
          <img src="{{ producto.imagen.url }}" alt="{{ producto.nombre }}" class="w-20 h-20 rounded" />
        </div>
      </th>
      <th class="table-cell text-sm text-gray-900 font-light px-6 py-4 place-content-center text-center">{{ producto.nombre }}</th>
      {% if usuario is None %}
      <th class="table-cell text-sm text-gray-900 font-light px-6 py-4 place-content-center text-center">Inicia sesion para ver los precios</th>
      {% endif %} {% if usuario is not None %}
      <th class="table-cell text-sm text-gray-900 font-light px-6 py-4 place-content-center text-center">{{ producto.precio }}</th>
      {% endif %}
      <th class="table-cell text-sm text-gray-900 font-light px-6 py-4 m-auto">
        <div class="flex justify-center">
          {% if producto.existencias > 0 %}
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#00FF0F" class="w-10 h-10">
            <path
              fill-rule="evenodd"
              d="M19.916 4.626a.75.75 0 0 1 .208 1.04l-9 13.5a.75.75 0 0 1-1.154.114l-6-6a.75.75 0 0 1 1.06-1.06l5.353 5.353 8.493-12.74a.75.75 0 0 1 1.04-.207Z"
              clip-rule="evenodd"
            />
          </svg>
          {% else %}
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#FF0000" class="w-10 h-10">
            <path
              fill-rule="evenodd"
              d="M5.47 5.47a.75.75 0 0 1 1.06 0L12 10.94l5.47-5.47a.75.75 0 1 1 1.06 1.06L13.06 12l5.47 5.47a.75.75 0 1 1-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 0 1-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 0 1 0-1.06Z"
              clip-rule="evenodd"
            />
          </svg>
          {% endif %}
        </div>
      </th>
      <th class="table-cell place-content-center text-center rounded-r-lg">
        <div x-data="{ openView: false, openDelete: false }" class="inline">
          <button
            @click="openView = true"
            class="py-2 px-4 shadow-md no-underline rounded-full text-white font-sans font-semibold text-sm border-red btn-primary hover:text-white focus:outline-none active:shadow-none bg-blue-400 hover:bg-blue-500"
          >
            Ver
          </button>
        </div>
      </th>
    </tr>
    {% endfor %}
  </tbody>
</table>
<label>{{ venta_actual.total_venta }}</label>

<form method="post" class="flex flex-col mt-4">
  {% csrf_token %}
  <button
    type="submit"
    name="cancelar_compra"
    class="py-2 px-4 shadow-md no-underline rounded-full text-white font-sans font-semibold text-sm border-red btn-primary hover:text-white focus:outline-none active:shadow-none bg-red-400 hover:bg-red-500"
  >
    Cancelar compra
  </button>
</form>

<form method="post" class="flex flex-col mt-4">
  {% csrf_token %} {{ form.as_p }}
  <button
    type="submit"
    class="py-2 px-4 shadow-md no-underline rounded-full text-white font-sans font-semibold text-sm border-red btn-primary hover:text-white focus:outline-none active:shadow-none bg-green-400 hover:bg-green-500"
  >
    Confirmar compra
  </button>
</form>
{% else %}
<h1>AÃºn no tienes productos en tu carrito</h1>
{% endif %}
<script src="https://cdn.jsdelivr.net/npm/alpinejs@2.8.2/dist/alpine.min.js" defer></script>
{% endblock %}
